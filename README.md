# ЭФМО-01-25 Буров М.А. ПР7

# Описание проекта
Подключение и работа с Redis (set/get, TTL). Реализация простого кэша.

# Требования к проекту
* Go 1.25+
* Redis
* Git

# Версия Go
<img width="317" height="55" alt="image" src="https://github.com/user-attachments/assets/43f9087b-95b9-4c7d-86e9-746258c45c63" />

# Цели:
-	Освоить базовые операции работы с Redis из Go-приложения.
-	Научиться использовать команды SET, GET, задавать время жизни ключей (TTL).
-	Реализовать кэширование данных для ускорения работы API.
-	Понять, в каких случаях кэш помогает снизить нагрузку на базу данных.

# Структура проекта
Дерево структуры проекта: 
```
pz7-gorm/
├── internal/
│   └── cache/
│       └── cache.go
├── cmd/
│   └── server/
│       └── main.go
├── go.mod
└── go.sum
```
# Краткое описание

Redis — это высокопроизводительная in-memory система хранения данных, которая работает по принципу «ключ–значение». Все данные хранятся в оперативной памяти, что позволяет получать значения за миллисекунды. Redis часто используется как кэш для ускорения приложений, хранилище сессий, брокер сообщений или счётчик. 

TTL (time-to-live) — это встроенный механизм, который автоматически удаляет ключи из Redis после истечения указанного времени, помогая избежать устаревших данных и перегрузки памяти.

# Скриншоты

Запрос /set:

<img width="1369" height="569" alt="image" src="https://github.com/user-attachments/assets/7229d60b-322c-4ee8-aa7e-c81b4459ed84" />

Запрос /get:

<img width="1373" height="552" alt="image" src="https://github.com/user-attachments/assets/faf16a48-cfd9-48fd-a86f-2df915dbc93a" />

Запрос /ttl:

<img width="1373" height="530" alt="image" src="https://github.com/user-attachments/assets/2252ce79-239f-46a7-ac5c-98e17064b604" />

# Ответы на контрольные вопросы

1.	Чем Redis отличается от реляционной БД?

Redis и реляционная БД (например, PostgreSQL) предназначены для разных целей. Реляционная БД хранит данные на диске в структурированном виде с таблицами, строками и SQL-запросами, обеспечивает долгосрочное хранение и сложные запросы. Redis же хранит данные в памяти, работает с командами (SET, GET, DEL), не использует SQL и таблицы, и предназначен для быстрого доступа к данным. Redis идеален для кэширования и часто используемых данных, но при перезагрузке все данные теряются. Реляционная БД медленнее, но надёжнее для постоянного хранения.

2.	Какие типы данных поддерживает Redis кроме строк?

Кроме строк Redis поддерживает списки (упорядоченные наборы значений), множества (неупорядоченные уникальные значения), хэши (структуры типа словарей с полями и значениями), упорядоченные множества (множества с приоритетом), битовые поля (для работы с битами) и гео-данные (для хранения координат и поиска по расстоянию). Каждый тип имеет набор команд для работы.

3.	Зачем нужен TTL? Приведите примеры.

TTL необходим для автоматического удаления устаревших данных из кэша. Например, если кэшируется список популярных товаров, устанавливают TTL 5 минут, и через 5 минут ключ удалится, заставляя приложение получить свежий список. Другой пример — сессия пользователя с TTL 1 час; если пользователь неактивен, сессия удалится. TTL также защищает от переполнения памяти, так как старые неиспользуемые ключи удаляются автоматически. Это критично для кэширования, так как данные должны быть свежими, а не жить в памяти вечно.

4.	Как Redis помогает снизить нагрузку на PostgreSQL?

Redis работает по принципу кэша: при первом запросе приложение проверяет Redis, и если там нет данных, идёт в PostgreSQL, получает результат, сохраняет его в Redis с TTL и возвращает клиенту. При следующем запросе результат берётся из Redis, минуя БД. Это особенно эффективно для часто запрашиваемых данных (например, список категорий товаров или популярные статьи). Вместо того чтобы каждый из тысяч пользователей запрашивал одно и то же из PostgreSQL, они получают результат из памяти за миллисекунды. Таким образом, нагрузка на БД снижается в разы.

5.	Что произойдёт, если ключ в Redis «протух» по TTL, а приложение попытается его прочитать?

Если TTL истёк и ключ был автоматически удалён из Redis, приложение при попытке получить значение через GET получит ошибку (в библиотеке go-redis это будет redis.Nil). Приложение должно обработать эту ошибку — как правило, оно идёт в PostgreSQL, получает актуальные данные, сохраняет их обратно в Redis с новым TTL и возвращает результат. Таким образом, система автоматически обновляет кэш и всегда имеет свежие данные в пределах установленного TTL.
